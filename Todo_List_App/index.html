<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.10.3/sql-wasm.js"></script>

</head>

<body>
    <div class="container">
        
        <form id="todoForm">
            
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h1>Todo App</h1>
            </div>

            <div class="mb-3">
                <label for="title" class="form-label">Title</label>
                <input class="form-control" type="text" placeholder="Title..." name="title" id="title"/>
            </div> 

            <div class="mb-3">
                <label for="description" class="description">Description</label>
                <input class="form-control" type="text" placeholder="Description..." name="description" id="description"/>
            </div> 

            <div class="mb-3">
                <label for="priority" class="form-label">Priority</label>
                <select class="form-select" id="priority" name="priority">
                    <option value="low">Low</option>
                    <option value="medium" selected>Medium</option>
                    <option value="high">High</option>
                </select>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="startTime" class="form-label">Start Time</label>
                    <input class="form-control" type="datetime-local" id="startTime"/>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="endTime" class="form-label">End Time</label>
                    <input class="form-control" type="datetime-local" id="endTime"/>
                </div>
            </div>

            <div class="mb-3 group-btn">
                <button id="reset-btn" class="btn btn-secondary" type="button">Reset</button>
                <button id="add-btn" class="btn btn-primary">Add</button>
            </div>
        </form>
        
        <div class="text-center mb-3">
             <button id="toggleStatsBtn" class="btn btn-outline-success">
                <i class='bx bx-pie-chart-alt-2'></i> Xem Thống Kê
            </button>
        </div>
        
        <div id="statisticsSection" style="display: none; margin: 30px auto;">
            <div class="row">
                <div class="col-md-6">
                    <div style="width: 100%; max-width: 450px; margin: 0 auto 30px auto;">
                        <canvas id="overviewChart"></canvas>
                    </div>
                </div>
                <div class="col-md-6">
                    <div style="width: 100%; margin: 0 auto 30px auto;">
                        <canvas id="dailyChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
            <h3>Current Tasks</h3>
            <button id="toggleArchiveBtn" class="btn btn-outline-primary btn-sm">
                <i class='bx bx-archive'></i> View Archive
            </button>
        </div>

        <div class="mb-3">
            <input type="search" class="form-control" id="searchInput" placeholder="Type to search by title...">
        </div>

        <div class="table-responsive">
            <table class="table table-bordered table-striped text-center">
                <thead>
                    <tr>
                        <th>STT</th> 
                        <th>Title</th>
                        <th>Description</th>
                        <th>Priority</th> 
                        <th>Start Time</th>
                        <th>End Time</th>
                        <th>
                            <span>Action - </span>
                            <button id="remove-all-btn" class="btn btn-danger">Remove All</button>
                        </th>
                    </tr>
                </thead>
                <tbody id="tbody"></tbody>
            </table>
        </div>

        <div id="archiveSection" style="display: none;">
            <hr>
            <h3>Archived Tasks</h3>
            <div class="table-responsive">
                <table class="table table-bordered table-striped text-center table-dark">
                    <thead>
                        <tr>
                            <th>STT</th> 
                            <th>Title</th>
                            <th>Description</th>
                            <th>Priority</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="archiveTbody"></tbody>
                </table>
            </div>
        </div>

    </div>

    <div class="modal fade" id="introModal" tabindex="-1" aria-labelledby="introModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="introModalLabel">Hướng dẫn sử dụng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Đây là hướng dẫn nhanh để bạn bắt đầu:</p>
                    <ul>
                        <li><strong>Thêm việc:</strong> Điền đầy đủ thông tin vào biểu mẫu (form) và nhấn nút <strong>"Add"</strong>.</li>
                        <li><strong>Hoàn thành việc:</strong> Nhấp trực tiếp vào <strong>Tiêu đề</strong> của công việc. Tiêu đề sẽ chuyển sang màu xanh lá (hoàn thành) hoặc đỏ (chưa xong).</li>
                        <li><strong>Ưu tiên:</strong> Chọn mức độ ưu tiên (High, Medium, Low) để dễ dàng phân loại công việc.</li>
                        <li><strong>Cảnh báo Deadline:</strong> Những công việc chưa hoàn thành và còn dưới 1 ngày là đến hạn sẽ được <strong>tô màu vàng</strong>.</li>
                        <li><strong>Sửa/Xóa:</strong> Sử dụng các nút <strong>"Update"</strong> hoặc <strong>"Remove"</strong> ở cột "Action".</li>
                        <li><strong>Lưu trữ (Archive):</strong> Khi một công việc đã hoàn thành (màu xanh), nút <strong>"Archive"</strong> sẽ xuất hiện. Nhấn vào đó để cất công việc vào kho.</li>
                        <li><strong>Xem lại:</strong> Sử dụng các nút <strong>"Xem Thống Kê"</strong> và <strong>"View Archive"</strong> để xem biểu đồ tiến độ hoặc các công việc đã cất đi.</li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Tôi đã hiểu!</button>
                </div>
            </div>
        </div>
    </div>

    
    <div id="left-helper-container" data-bs-toggle="modal" data-bs-target="#introModal">
        <div class="speech-bubble left-bubble">
            Chào bạn, hãy ấn zô đây để xem hướng dẫn sử dụng nha. Phần mềm này mình ngẫu hứng làm ra nên có xảy ra lỗi thì mong bạn thông cảm nha!
        </div>
        <div class="welcome-character">
            <img src="image/my_profile_avatar.png" alt="Nhân vật hướng dẫn" class="profile-avatar">
        </div>
    </div>

    
    <div id="right-helper-container">
        <div class="welcome-character">
            <img src="image/my_profile_avatar_2.jpg" alt="Nhân vật chào mừng" class="profile-avatar">
        </div>
        <div class="speech-bubble right-bubble">
            Chúc bạn 1 ngày tốt lành!
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script type="module" src="./main.js"></script>
</body>
</html>